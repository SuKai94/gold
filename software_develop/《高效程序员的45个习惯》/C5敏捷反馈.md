第5章 敏捷反馈
===

### 19.守护天使

代码是变化最频繁的东西，要编写能产生反馈的代码，这时候就需要自动化单元测试

即：用代码来测试变量的具体值，单元测试的注意点：

- **确保测试是可重复的**，使用当前的日期或时间作为参数，会让测试依赖运行时间，使用你自己机器上IP，同样让测试依赖运行时机器
- **测试你的边界条件**，11:59:59和0:00:00都是不错的边界条件
- **不要放过任何一个失败的测试**

把单元测试的结果看作是编译器一样，测试未通过就如编译没有通过

接下来就是在后台架设构建服务器，不断获得最新版本代码，然后编译，运行单元测试，并及时获得反馈，这就是守护天使

单元测试好处：

- 单元测试能及时提供反馈
- 单元测试让你的代码更加健壮
- 单元测试是有用的设计工具
- 单元测试是让你自信的后台
- 单元测试是解决问题时的探测器
- 单元测试是可信的文档
- 单元测试是学习工具

### 20.先用它在实现它

编程之前，先写测试

测试驱动开发TDD，先写测试，你就站在用户角度思考，而不仅仅是一个单纯的实现者，这也有利于消除过度复杂的设计

好的设计不意味着很多的类

### 21.不同环境，就有不同问题

用一个持续集成工具，周期性从源代码控制系统中取得代码，运行代码，并及时将失败信息通知开发者

要在多个平台测试，只要为每个平台设置持续集成系统就行了

感觉就像在做单元测试，而且是跨越不同世界的单元测试

### 22.自动验收测试

关键业务逻辑必须要独立进行严格的测试，并最后需要通过用户审批

但你不能拉着用户，逐一检查每个单元测试结果。有一个办法可以使验收测试不同于单元测试，你应该让用户不必在学习编程情况下，根据自己需要进行添加，更新和修改数据

比如把数据放在一个平面文件，用户可以直接修改，然后查看测试结果

### 23.度量真实的进度

专注于你的方向

随意用一个比率（80%）度量工作是没有意义的，我们不应该计算工作完成的百分比，而应该测定还剩下多少工作量没有完成

在为下一个任务估计工作量时，可以根据前一次完成经验调整评估

比如，本来评估2天，结果花了6天，那么系数是3，下次评估就要乘系数3

如果能一直让下一步工作是可见的，就使用代办事项，你可以让你的评估不断改进，越来越清楚完成一项任务花费的时间

### 24.倾听用户的声音

对客户愚蠢抱怨，你既不会生气，也不会轻视，你会查看一下，找到背后真正的原因
